Мы столкнулись с проблемой при отправке формы заявки на пробное занятие в нашем проекте. Форма реализована в файле trial-request-2.tsx и не отправляется – вместо этого выводится ошибка (см. приложенные логи и скриншоты).

Что нужно сделать:

Анализ проблемы в форме заявки:
Проверьте файл trial-request-2.tsx – он использует React Hook Form с валидатором через Zod, а также отправляет данные через API (метод POST на /api/trial-requests).
Из логов видно, что форма не отправляется и появляется ошибка (в toast выводится текст ошибки). Просмотрите логи, чтобы выяснить, какая именно ошибка возвращается.
Проверьте, что все обязательные поля (childName, childAge, parentName, parentPhone, sectionId, branchId, desiredDate) корректно передаются в API и соответствуют схеме insertTrialRequestSchema (описанной в файле схемы).
Проверка API и базы данных:
Проверьте файл api.ts (или аналогичный), который используется для отправки запросов. Убедитесь, что API запрос к /api/trial-requests корректно формируется и отправляется.
Посмотрите в файле routes.ts и storage.ts, а также в схеме (например, schema-3.ts), как реализован эндпоинт для создания заявки. Убедитесь, что база данных возвращает корректный ответ и что нет ошибок в запросах к базе.
Особое внимание уделите части, отвечающей за получение и сохранение информации об отделениях (branch) – в логах отмечалось, что отделения могут быть пустыми или некорректно загружаться.
Исправления и тестирование:
Если обнаружатся ошибки в передаче данных с формы, исправьте их так, чтобы данные соответствовали требованиям API.
Проверьте корректность работы API эндпоинта – если нужно, исправьте запросы в файлах routes.ts/storage.ts, чтобы обеспечить корректное сохранение заявки в базе.
После внесения исправлений, убедитесь, что при отправке формы появляется сообщение об успешной отправке (toast "Заявка отправлена") и форма сбрасывается.
Требования к исправлению:

Предоставьте готовый исправленный код файла trial-request-2.tsx.
Если необходимо, внесите изменения в файлы routes.ts, storage.ts и schema-3.ts для корректной работы эндпоинта /api/trial-requests.
Код должен быть готов для копирования и вставки, без сокращений, с подробными комментариями, объясняющими внесённые изменения.
Цель: Сделать так, чтобы при заполнении и отправке формы заявки данные корректно сохранялись в базе, API возвращал успешный ответ, и пользователь видел уведомление об успешной отправке.